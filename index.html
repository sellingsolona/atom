<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js Application</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="styles.css"> <!-- Include the new CSS file -->
    <style>
        body { margin: 0; }
        canvas { display: block; }
    </style>
    
    <!-- Import Map for Three.js and External Modules -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.163.0/build/three.module.js",
            "three/examples/jsm/controls/TrackballControls.js": "https://cdn.jsdelivr.net/npm/three@0.163.0/examples/jsm/controls/TrackballControls.js",
            "three/examples/jsm/libs/tween.module.js": "https://cdn.jsdelivr.net/npm/three@0.163.0/examples/jsm/libs/tween.module.js",
            "three/examples/jsm/renderers/CSS3DRenderer.js": "https://cdn.jsdelivr.net/npm/three@0.163.0/examples/jsm/renderers/CSS3DRenderer.js"
        }
    }
    </script>
</head>

<body>
    <div id="overlay">
        <div id="wrapper">
            <div id="glitch-text">JOIN THE PRESALE</div>
            <button id="enter-button">ENTER</button>
        </div>
    </div>
    <div id="content-box">
        <section id="sol-deposit">
            <h2>Sol Deposit Address</h2>
            <p id="deposit-address">BYwR3aMSudRWS7rAb5u9SNH8eDyDp9RZV7Mb375UuDSp</p>
            <button id="copy-address">Copy Address</button>
        </section>
        <section id="phantom-wallet">
            <h2>How to Obtain a Phantom Wallet</h2>
            <ul>
                <li><a href="https://apps.apple.com/us/app/phantom-wallet/id1563367268">Apple App Store</a></li>
                <li><a href="https://play.google.com/store/apps/details?id=app.phantom">Google Play Store</a></li>
                <li><a href="https://phantom.app/">Phantom Web (Chrome & Desktop extension)</a></li>
            </ul>
            <ol>
                <li>Download and install the Phantom Wallet from the official source.</li>
                <li>Open the app and create a new wallet.</li>
                <li>Secure your secret recovery phrase (DO NOT share it).</li>
                <li>Set a strong password to protect access.</li>
                <li>Find your wallet address under the “Receive” tab.</li>
            </ol>
        </section>
        <section id="buy-sol">
            <h2>How to Buy Solana (SOL) on MoonPay & Send to Phantom</h2>
            <p><a href="https://www.moonpay.com/buy/sol">MoonPay Buy SOL</a></p>
            <ol>
                <li>Go to MoonPay and select Solana (SOL).</li>
                <li>Enter the amount of SOL you want and proceed to checkout.</li>
                <li>Enter your Phantom wallet address in the recipient field.</li>
                <li>Complete the purchase using a credit/debit card.</li>
                <li>Wait for SOL to be deposited into your Phantom Wallet.</li>
            </ol>
        </section>
        <section id="send-sol">
            <h2>How to Send SOL from Phantom to the Presale Wallet</h2>
            <ol>
                <li>Open Phantom Wallet and navigate to the "Send" tab.</li>
                <li>Paste the deposit address (BYwR3aMSudRWS7rAb5u9SNH8eDyDp9RZV7Mb375UuDSp).</li>
                <li>Enter the amount of SOL you want to send.</li>
                <li>Review the transaction and confirm.</li>
                <li>Wait for transaction confirmation (usually takes seconds).</li>
            </ol>
        </section>
    </div>

    <div id="container"></div>

    <script type="module">
        import * as THREE from 'three';
        import TWEEN from 'three/examples/jsm/libs/tween.module.js';
        import { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';
        import { CSS3DRenderer, CSS3DSprite } from 'three/examples/jsm/renderers/CSS3DRenderer.js';

        let camera, scene, renderer;
        let controls;

        const particlesTotal = 512;
        const positions = [];
        const objects = [];
        let current = 0;

        init();
        animate();

        function init() {
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 5000);
            camera.position.set(600, 400, 1500);
            camera.lookAt(0, 0, 0);

            scene = new THREE.Scene();

            // ✅ Check the path of sprite.png
            const image = document.createElement('img');
            image.src = 'examples/textures/sprite.png'; // Ensure correct path

            image.addEventListener('load', function () {
                for (let i = 0; i < particlesTotal; i++) {
                    const object = new CSS3DSprite(image.cloneNode());
                    object.position.set(
                        Math.random() * 4000 - 2000,
                        Math.random() * 4000 - 2000,
                        Math.random() * 4000 - 2000
                    );
                    scene.add(object);
                    objects.push(object);
                }
                transition();
            });

            // Create Different Shapes and Positions
            createPositions();

            // Renderer
            renderer = new CSS3DRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('container').appendChild(renderer.domElement);

            // Controls
            controls = new TrackballControls(camera, renderer.domElement);
            window.addEventListener('resize', onWindowResize);
        }

        function createPositions() {
            // Plane
            const amountX = 16, amountZ = 32, separationPlane = 150;
            const offsetX = ((amountX - 1) * separationPlane) / 2;
            const offsetZ = ((amountZ - 1) * separationPlane) / 2;

            for (let i = 0; i < particlesTotal; i++) {
                const x = (i % amountX) * separationPlane;
                const z = Math.floor(i / amountX) * separationPlane;
                const y = (Math.sin(x * 0.5) + Math.sin(z * 0.5)) * 200;
                positions.push(x - offsetX, y, z - offsetZ);
            }

            // Cube
            const amount = 8, separationCube = 150, offset = ((amount - 1) * separationCube) / 2;
            for (let i = 0; i < particlesTotal; i++) {
                const x = (i % amount) * separationCube;
                const y = Math.floor((i / amount) % amount) * separationCube;
                const z = Math.floor(i / (amount * amount)) * separationCube;
                positions.push(x - offset, y - offset, z - offset);
            }

            // Random
            for (let i = 0; i < particlesTotal; i++) {
                positions.push(
                    Math.random() * 4000 - 2000,
                    Math.random() * 4000 - 2000,
                    Math.random() * 4000 - 2000
                );
            }

            // Sphere
            const radius = 750;
            for (let i = 0; i < particlesTotal; i++) {
                const phi = Math.acos(-1 + (2 * i) / particlesTotal);
                const theta = Math.sqrt(particlesTotal * Math.PI) * phi;
                positions.push(
                    radius * Math.cos(theta) * Math.sin(phi),
                    radius * Math.sin(theta) * Math.sin(phi),
                    radius * Math.cos(phi)
                );
            }
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function transition() {
            const offset = current * particlesTotal * 3;
            const duration = 2000;

            for (let i = 0, j = offset; i < particlesTotal; i++, j += 3) {
                const object = objects[i];
                new TWEEN.Tween(object.position)
                    .to({ x: positions[j], y: positions[j + 1], z: positions[j + 2] }, Math.random() * duration + duration)
                    .easing(TWEEN.Easing.Exponential.InOut)
                    .start();
            }

            new TWEEN.Tween(this).to({}, duration * 3).onComplete(transition).start();
            current = (current + 1) % 4;
        }

        function animate() {
            requestAnimationFrame(animate);
            TWEEN.update();
            controls.update();

            const time = performance.now();
            for (let i = 0, l = objects.length; i < l; i++) {
                const object = objects[i];
                const scale = Math.sin((Math.floor(object.position.x) + time) * 0.002) * 0.3 + 1;
                object.scale.set(scale, scale, scale);
            }

            renderer.render(scene, camera);
        }
    </script>
    <script src="script.js"></script> <!-- Include the new JavaScript file -->
</body>
</html>
